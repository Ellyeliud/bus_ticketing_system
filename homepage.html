<!DOCTYPE html>
<html lang="eng">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ELLYPROExpress - Passenger & Cargo Transport</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .hero {
      background: url('https://images.unsplash.com/photo-1581090700227-4c4f9cf21c77?auto=format&fit=crop&w=1500&q=80') no-repeat center/cover;
      height: 90vh;
      position: relative;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
    }
    .hero::after {
      content: "";
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
    }
    .hero-content {
      position: relative;
      z-index: 2;
    }
    .section-padding {
      padding: 60px 20px;
    }
    .footer {
      background: #0d6efd;
      color: white;
      padding: 20px;
      text-align: center;
    }
    .comment-form {
  max-width: 600px;
  margin: 20px auto;
  display: flex;
  flex-direction: column;
  gap: 10px;
}
.comment-form input, .comment-form textarea {
  padding: 10px;
  border: 1px solid #ccc;
  border-radius: 6px;
  width: 100%;
}
.comment-form button {
  background: #0d6efd;
  color: white;
  padding: 10px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-weight: bold;
}
.comment-form button:hover {
  background: #0b5ed7;
}
.comment-list {
  max-width: 700px;
  margin: 30px auto;
  text-align: left;
}
.comment {
  background: #f9f9f9;
  padding: 15px;
  margin-bottom: 15px;
  border-radius: 8px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
}
.comment h4 {
  margin: 0 0 5px;
  color: #0d6efd;
}
.comment small {
  color: #666;
}

  </style>
</head>
<body>

  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top">
  <div class="container">
    <a class="navbar-brand fw-bold" href="#">ELLYPROexpress</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link active" href="#" data-key="home">Home</a></li>
        <li class="nav-item"><a class="nav-link" href="#ticket" data-key="book_ticket">Book Ticket</a></li>
        <li class="nav-item"><a class="nav-link" href="#cargo" data-key="send_cargo">Send Cargo</a></li>
        <li class="nav-item"><a class="nav-link" href="#about" data-key="about">About</a></li>
        <li class="nav-item"><a class="nav-link" href="#contact" data-key="contact">Contact</a></li>
      </ul>     

     <a href="admin_login.php" class="btn btn-warning ms-3 fw-bold" data-key="login">Admin Login</a>

    </div>
  </div>
</nav>


  <!-- Hero Section -->
  <section class="hero">
    <div class="hero-content">
      <h1 class="display-4 fw-bold">Safe, Fast & Reliable Transport</h1>
      <p class="lead">We transport passengers and cargo across Tanzania.</p>
      <a href="#ticket" class="btn btn-warning btn-lg me-2">Book Passenger Ticket</a>
      <a href="#cargo" class="btn btn-light btn-lg">Send Cargo</a>
    </div>
  </section>

  <!-- Passenger Booking -->
  <section id="ticket" class="container mt-5 pt-5">
  <h2 class="text-center text-primary mb-4">Quick Passenger Booking</h2>

  <form id="bookingForm" class="row g-3 shadow p-4 bg-light rounded" method="GET" action="available_seats.php" autocomplete="on">
  <div class="col-md-6 position-relative">
    <label class="form-label">From</label>
    <input type="text" id="fromCity" name="from_city" class="form-control" placeholder="Enter departure city" required>
  </div>
  <div class="col-md-6 position-relative">
    <label class="form-label">To</label>
    <input type="text" id="toCity" name="to_city" class="form-control" placeholder="Enter destination city" required>
  </div>
  <div class="col-md-6">
    <label class="form-label">Date</label>
    <input type="date" id="tripDate" name="trip_date" class="form-control" required>
  </div>
  <div class="col-12 text-center">
    <button type="submit" class="btn btn-primary btn-lg">Search available seat</button>
  </div>
</form>
</section>

<script>
const fromInput = document.getElementById("fromCity");
const toInput = document.getElementById("toCity");
const form = document.getElementById("bookingForm");

// Allowed cities
const fromCities = ["Dar es Salaam","Mwanza", "Arusha", "Bukoba", "Mbeya"];
const toCities   = ["Mwanza", "Arusha", "Bukoba", "Mbeya","Dar es Salaam"];

// Autocomplete function
function autocomplete(input, arr) {
  input.addEventListener("input", function() {
    const val = this.value.toLowerCase();
    closeAllLists();
    if (!val) return false;

    const list = document.createElement("div");
    list.setAttribute("class", "autocomplete-items");
    this.parentNode.appendChild(list);

    arr.forEach(item => {
      if (item.toLowerCase().startsWith(val)) {
        const option = document.createElement("div");
        option.innerHTML = "<strong>" + item.substr(0, val.length) + "</strong>";
        option.innerHTML += item.substr(val.length);
        option.addEventListener("click", function() {
          input.value = item;
          closeAllLists();
        });
        list.appendChild(option);
      }
    });
  });

  function closeAllLists(elmnt) {
    const items = document.querySelectorAll(".autocomplete-items");
    items.forEach(item => {
      if (elmnt != item && elmnt != input) item.remove();
    });
  }
  document.addEventListener("click", function (e) { closeAllLists(e.target); });
}

// Activate autocomplete
autocomplete(fromInput, fromCities);
autocomplete(toInput, toCities);

// Validate before submit
form.addEventListener("submit", function(e) {
  const fromVal = fromInput.value.trim();
  const toVal = toInput.value.trim();
  if (!fromCities.includes(fromVal)) {
    alert("We do not transport from this city / Possible typo!");
    e.preventDefault();
    return;
  }
  if (!toCities.includes(toVal)) {
    alert("We do not transport to this region / Possible typo!");
    e.preventDefault();
    return;
  }
});
</script>

  <!-- Cargo Form -->
 <section id="cargo" class="section-padding bg-light">
  <div class="container">
    <h2 class="text-center text-primary mb-4">Send Cargo</h2>

    <!-- Notice the action and method -->
    <form action="cargo_step1_process.php" method="post" class="row g-3 shadow p-4 bg-white rounded">
      
      <div class="col-md-6">
        <label class="form-label">Pickup Location</label>
        <input type="text" name="pickup" class="form-control" placeholder="Enter pickup city" required>
      </div>

      <div class="col-md-6">
        <label class="form-label">Delivery Location</label>
        <input type="text" name="delivery" class="form-control" placeholder="Enter delivery city" required>
      </div>

      <div class="col-md-6">
        <label class="form-label">Type of Goods</label>
        <input type="text" name="goods" class="form-control" placeholder="e.g. Electronics, Clothes" required>
      </div>

      <div class="col-md-6">
        <label class="form-label">Weight (kg)</label>
        <input type="number" name="weight" class="form-control" placeholder="Enter weight" required>
      </div>

      <div class="col-12 text-center">
        <button type="submit" class="btn btn-primary btn-lg">Send Cargo</button>
      </div>
    </form>
  </div>
</section>


  <!-- How it Works -->
  <section class="section-padding container">
    <h2 class="text-center text-primary mb-4">How It Works</h2>
    <div class="row text-center">
      <div class="col-md-3 mb-3"><div class="p-4 shadow rounded bg-light">1️⃣ Search your trip or cargo</div></div>
      <div class="col-md-3 mb-3"><div class="p-4 shadow rounded bg-light">2️⃣ Choose bus or cargo option</div></div>
      <div class="col-md-3 mb-3"><div class="p-4 shadow rounded bg-light">3️⃣ Pay securely online</div></div>
      <div class="col-md-3 mb-3"><div class="p-4 shadow rounded bg-light">4️⃣ Get ticket or cargo confirmation</div></div>
    </div>
  </section>

  <!-- Popular Routes -->
  <section class="section-padding bg-light">
    <div class="container">
      <h2 class="text-center text-primary mb-4">Popular Routes</h2>
      <div class="row text-center">
        <div class="col-md-3 mb-3"><div class="card p-3">DAR ES SALAAM → BUKOBA</div></div>
        <div class="col-md-3 mb-3"><div class="card p-3">DAR ES SALAAM →MWANZA</div></div>
        <div class="col-md-3 mb-3"><div class="card p-3">DAR ES SALAAM → ARUSHA</div></div>
        <div class="col-md-3 mb-3"><div class="card p-3">DAR ES SALAAM → MBEYA</div></div>
      </div>
    </div>
  </section>

  <!-- Why Choose Us -->
  <section id="about" class="section-padding container text-center">
    <h2 class="text-primary mb-4">Why Choose Us?</h2>
    <p>✔ Comfortable buses & cargo trucks <br>
       ✔ Affordable & reliable services <br>
       ✔ Easy online booking & tracking <br>
       ✔ 24/7 customer support</p>
  </section>

  <!-- Testimonials -->
  <section class="section" id="comments">
   <section class="section-padding bg-light" id="comments">
  <div class="container">
    <h2 class="text-center text-primary mb-4">Comment About Our Services</h2>

    <!-- Comment Form -->
    <form id="commentForm" class="comment-form shadow p-4 bg-white rounded">
      <input type="text" id="name" placeholder="Your Name" required>
      <textarea id="message" rows="3" placeholder="Write your comment..." required></textarea>
      <button type="submit">Post Comment</button>
    </form>

    <!-- Comment List -->
    <div id="commentList" class="comment-list"></div>

    <!-- Show More Button -->
    <div class="text-center">
      <button id="showMoreBtn" class="btn btn-outline-primary mt-3" style="display:none;">
        Show All Comments
      </button>
    </div>
  </div>
</section>

<script>
  let comments = [];
  let showLimit = 3;

  // Fetch comments from server
  async function fetchComments() {
    const res = await fetch("get_comments.php");
    comments = await res.json();
    renderComments(showLimit);
  }

  // Render comments
  function renderComments(limit = 3) {
    const commentList = document.getElementById("commentList");
    const showMoreBtn = document.getElementById("showMoreBtn");
    commentList.innerHTML = "";

    comments.slice(0, limit).forEach(c => {
      const div = document.createElement("div");
      div.classList.add("comment");
      div.innerHTML = `
        <h4>${c.name}</h4>
        <p>${c.message}</p>
        <small>${c.created_at}</small>
      `;
      commentList.appendChild(div);
    });

    if (comments.length > limit) {
      showMoreBtn.style.display = "inline-block";
    } else {
      showMoreBtn.style.display = "none";
    }
  }

  // Handle form submission
  document.getElementById("commentForm").addEventListener("submit", async function(e) {
    e.preventDefault();
    const name = document.getElementById("name").value.trim();
    const message = document.getElementById("message").value.trim();

    if (name && message) {
      let formData = new FormData();
      formData.append("name", name);
      formData.append("message", message);

      const res = await fetch("save_comment.php", {
        method: "POST",
        body: formData
      });

      const result = await res.text();
      if(result.trim() === "success"){
        document.getElementById("commentForm").reset();
        fetchComments(); // reload comments
      } else {
        alert("Error saving comment.");
      }
    }
  });

  // Show all comments
  document.getElementById("showMoreBtn").addEventListener("click", function() {
    renderComments(comments.length);
    this.style.display = "none";
  });

  // Initial load
  fetchComments();
</script>

</section>


  <!-- Contact -->
  <section id="contact" class="section-padding container text-center">
    <h2 class="text-primary mb-4">Contact Us</h2>
    <p>📞 +255 616 490 015 | ✉ info@ELLYPROExpress.com</p>
    <p>Visit our offices in Dar es Salaam, Arusha, Mwanza</p>
  </section>

  <!-- Footer -->
  <footer class="footer">
    &copy; 2025 ELLYPROExpress. All Rights Reserved. | Follow us on Facebook, Twitter, Instagram @ELLYPROExpress
  </footer>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
